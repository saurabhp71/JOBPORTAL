@model JobPortalLibrary.Employer.EmployerUser

@{
    ViewBag.Title = "Jobapplystud";
    Layout = "~/Views/Shared/Employer_Layout.cshtml";
}
<style>

    #tooltip {
        position: relative;
        width: 100px;
    }

        #tooltip .logOutToolTip {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1;
            bottom: 65%;
            left: 50%;
            margin-left: -81px;
            opacity: 1;
            transition: opacity 1s;
        }

            #tooltip .logOutToolTip::after {
                content: "";
                /* position: absolute;*/
                top: 100%;
                left: 50%;
                margin-left: -5px;
                border-width: 8px;
                border-style: solid;
                border-color: #555 transparent transparent transparent;
            }

        #tooltip:hover .logOutToolTip {
            visibility: visible;
            opacity: 1;
        }
</style>

<h2>Applied JobSeekers List</h2>
@*<script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>*@
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script>
    $(document).ready(function () {
        $(".btn11").click(function () {
            var AppliedJobId = $(this).attr("data-id");
            var postjcode = $(this).attr("postjobcode");

            $.post("/Employer/Approve", { AppliedJobId: AppliedJobId, postjobcode: postjcode })
                // parent.find(".status").html(data);
                //if (data == "R1 Cleared & ") {

                //   parent.find(".btn12").prop("disabled",true)

                .then(function () {
                    window.location.href = "/Employer/Jobapplystud?postjobcode=" + postjcode;
                })

        });
        $(".btn12").click(function () {
            var AppliedJobId = $(this).attr("data-id");
            var postjcode = $(this).attr("postjobcode");
            var url = "/Employer/Reject";

            $.post("/Employer/Reject", { AppliedJobId: AppliedJobId, postjobcode: postjcode })
                .then(function () {
                    window.location.href = "/Employer/Jobapplystud?postjobcode=" + postjcode;
                })
            /*$("#btn2").css({ backgroundColor: 'green' });*/
        });
    });
</script>
<!--<script>
    //$(document).ready(function () {
    //    $(".btn11").click(function () {
    //        $("#btn1").css({ backgroundColor: 'green' });
    //    });
    //});
    //$(document).ready(function () {
    //    $(".btn12").click(function () {
    //        $("#btn2").css({ backgroundColor: 'red' });
    //    });
    ///});*/*/
    //function changeBackgroundcolor() {
    //    var bg = document.getElementById(".btn11");
    //    bg.style.backgroundcolor = "green";
    //}
    //document.getElementById(".btn11").onclick = "green";
</script>-->

@*<style type="text/css">
        .btn11{
            background-color: red;

        }

        .btn11:hover{
            background-color: aqua;
        }
    </style>*@


@*<style>
        .container {
            margin-left: 320;
        }
    </style>*@
<!--<!--<button>-->
    <!--@*<a href="@Url.Action("AllRoundsGrid","Employer")" PostJobCode="@Model.PostJobCode">Manage Rounds</a>*@-->
    <!--@Html.ActionLink("Manage Rounds", "AllRoundsGrid", new { postjobcode = Model.PostJobCode })
</button>-->
<div class="row">
    <button style="color: white; width:150px;height: 50px; border-radius: 12px; font-weight: 500;border-color:transparent; font-size: 15px; line-height: 10px; text-align: center; display: flex; align-items: center; justify-content: center;background-color:royalblue">
        <a style="color: white;" href="@Url.Action("AllRoundsGrid","Employer", new { postjobcode = Model.PostJobCode})">Manage Rounds</a>
    </button>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <button style="color: white; width:150px;height: 50px; border-radius: 12px; font-weight: 500;border-color:transparent; font-size: 15px; line-height: 10px; text-align: center; display: flex; align-items: center; justify-content: center;background-color:royalblue">
        <a style="color: white;" href="@Url.Action("Addcandidate","Employer", new { postjobcode = Model.PostJobCode})">Add Candidate</a>
    </button>
</div>
<br />
<br />
<div class="container">
    <div class="row">

        <div class="col-sm-4 col-md-2 justify-content-center text-center card" style="width: 110px; border: solid blue 2px; background-color: aliceblue; height: 100px; color: black; text-decoration-thickness: 60px; box-shadow: 8px 8px 8px rgb(0,0,102);">
            @ViewBag.Active <br />
            <span class="caption">ACTIVE</span>
        </div>

        <div class="col-sm-4 col-md-2 justify-content-center text-center card" style="width: 110px; border: solid blue 2px; background-color: aliceblue; height: 100px; color: black; text-decoration-thickness: 60px; margin-left: 20px; box-shadow: 8px 8px 8px rgb(0,0,102); ">
            @ViewBag.Awaitingreview<br />
            <span class="caption">AWAITINGREVIEW</span>
        </div>
        <div class="col-sm-4 col-md-2 justify-content-center text-center card" style="width: 130px; border: solid blue 2px; background-color: aliceblue; height: 100px; color: black; text-decoration-thickness: 60px; margin-left: 20px; box-shadow: 8px 8px 8px rgb(0,0,102); ">
            @ViewBag.Review<br />
            <span class="caption">REVIEW</span>
        </div>
        <div class="col-sm-4 col-md-2 justify-content-center text-center card" style="width: 140px; border: solid blue 2px; background-color: aliceblue; height: 100px; color: black; text-decoration-thickness: 60px; margin-left: 20px; box-shadow: 8px 8px 8px rgb(0,0,102); ">
            @ViewBag.contacting<br />
            <span class="caption">CONTACTING</span>
        </div>
        <div class="col-sm-4 col-md-2 justify-content-center text-center card" style="width: 130px; border: solid blue 2px; background-color: aliceblue; height: 100px; color: black; text-decoration-thickness: 60px; margin-left: 20px; box-shadow: 8px 8px 8px rgb(0,0,102); ">
            @ViewBag.hire<br />
            <span class="caption">HIRE</span>
        </div>
        <div class="col-sm-4 col-md-2 justify-content-center text-center card" style="width: 130px; border: solid blue 2px; background-color: aliceblue; height: 100px; color: black; text-decoration-thickness: 60px; margin-left: 20px; box-shadow: 8px 8px 8px rgb(0,0,102); ">
            @ViewBag.Rejected<br />
            <span class="caption">REJECTED</span>
        </div>
    </div>
</div>


<table class="table table-hover" style="margin-left:0px;width:100%" id="rita">

    <tr style="background-color:#435ebe;color:white">
        <th style="width:50px;display:none">
            <label>Select</label>
        </th>
        <th style="display:none">
            @Html.DisplayNameFor(model => model.PostJobCode)
        </th>
        <th style="display:none">
            @Html.DisplayNameFor(model => model.Seekercode)
        </th>
        <th>
            @Html.HiddenFor(model => model.AppliedJobId)
        </th>

        <th>
            @Html.DisplayNameFor(model => model.SeekerName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ViewResume)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Status)
        </th>
        <th style="width:120px; ">
            @Html.DisplayNameFor(model => model.ApplyDate)
        </th>
        <th style="width:150px;">
            @Html.DisplayNameFor(model => model.Eligible)
        </th>
        <th style="width:150px">
            @Html.DisplayNameFor(model => model.Actions)
        </th>


    </tr>

    @foreach (var item in Model.joblist)
    {
        <tr class="application">
            <td style="display:none">
                <input type="checkbox" name="myTextEditBox" value="checked"
                       style="margin-left:auto; margin-right:auto;">
            </td>

            @*<td>
                    <input type="checkbox" value="" name="select" id="chk" style="height:100px" />
                </td>*@
            <td class="pjccode" style="display:none" data-id="@item.PostJobCode">
                @Html.DisplayFor(modelItem => item.PostJobCode)
            </td>
            <td class="seekercode" data-id="@item.Seekercode" id="scode" style="display:none">
                @Html.DisplayFor(modelItem => item.Seekercode)
            </td>
            <td id="mahesh" data-id="@item.AppliedJobId" class="mahesh" style="text-align:center">
                @Html.HiddenFor(modelItem => item.AppliedJobId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SeekerName)
            </td>
            <td style="text-decoration: underline; color:blue">

                <a href="~/Content/PDF Files/@item.ViewResume">
                    View Resume
                </a>



            </td>

            <!--<div id="tooltip">-->
            @*<a href="@Url.Action("ViewResume","Employer" ,new {AppliedJobId=item.AppliedJobId})">
                    <span>@Html.DisplayFor(modelItem => item.ViewResume)</span>
                    <label class="logOutToolTip">Click to see Resume</label>
                </a>*@
            <!--</div>-->

            <td class="status">
                @Html.DisplayFor(modelItem => item.Status)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ADate)
            </td>


            @*<button type="button" class="btn btn-success responce border-success" style="background:white;">

                        <a class="btn11" data-id="@item.AppliedJobId" postjobcode="@item.PostJobCode" style="color:green; font-size:20px; height:9px;">&#10004;</a>
                "R1 Cleared" || "R2 Cleared" || "R3 Cleared" || "R4 Cleared" || "R5 Cleared" || "ShortListed For R1"
                        </button>*@
            <td>
                @if (item.Status == "ShortListed For R1" || item.Status == "R1 Cleared" || item.Status == "R1 Cleared" || item.Status == "R2 Cleared" || item.Status == "R3 Cleared" || item.Status == "R5 Cleared")
                {
                    <button type="button" id="Reject" class="btn btn-success response border-success" style="background: white; border: solid green 2px;" disabled="disabled">
                        <p style="font-size:18px;height:9px;width:20px;">
                            <a class="btn11" id="btn1" value="Approve" title="Shortlist" data-id="@item.AppliedJobId" postjobcode="@item.PostJobCode"> &#10004; </a>

                        </p>
                    </button>
                }
                else
                {
                    <button type="button" id="Reject" class="btn btn-success response border-success" style="background:white;">
                        <p style="font-size:18px;height:9px;width:20px;">
                            <a class="btn11" id="btn1" value="Approve" title="Shortlist" data-id="@item.AppliedJobId" postjobcode="@item.PostJobCode"> &#10004; </a>

                        </p>

                    </button>
                }
                @if (item.Status == "ShortListed For R1" || item.Status == "R1 Cleared" || item.Status == "R1 Cleared" || item.Status == "R2 Cleared" || item.Status == "R3 Cleared" || item.Status == "R5 Cleared")
                {
                    <button type="button" id="Reject" class="btn btn-success response border-danger" style="background:white; " disabled="disabled">
                        <p style="font-size:18px;height:9px;width:20px;">
                            <a class="btn12" id="btn2" value="Reject" data-id="@item.AppliedJobId" postjobcode="@item.PostJobCode">  &#10060;</a>

                        </p>
                    </button>
                }
                else
                {
                    <button type="button" id="Reject" class="btn btn-success response border-danger" style="background: white; border: solid red 2px;">
                        <p style="font-size:18px;height:9px;width:20px;">
                            <a class="btn12" id="btn2" value="Reject" data-id="@item.AppliedJobId" postjobcode="@item.PostJobCode">  &#10060;</a>

                        </p>
                    </button>

                }

            </td>
            @* <input type="button" class="btn11" id="btn1" value="Approve" data-id="@item.AppliedJobId" postjobcode="@item.PostJobCode">*@

            <!--<input type="button" class="btn12" id="btn2" value="Reject" data-id="@item.AppliedJobId" postjobcode="@item.PostJobCode" />-->

            <td>
                <p style="font-size:18px;height:9px;width:20px;">
                    @*<a class="Details bi bi-telephone" data-id="@item.AppliedJobId" value="details" href="javascript:;"></a>*@
                    <a class="Details bi bi-telephone-fill" title="View" style="font-size:25px; color:blue;" href="javascript:;" data-id="@item.AppliedJobId"></a>
                </p>

                <p style="margin-left:50px;margin-top:-25px;">
                    <a class="Deletecandidate bi bi-trash" title="View" style="font-size:25px; color:blue;" href="javascript:;" data-id="@item.AppliedJobId"></a>
                </p>

                <p style="margin-left:92px;margin-top:-51px;">
                    <a class="bi bi-envelope" title="View" style="font-size:25px; color:blue;" href="@Url.Action("Studemail", "Employer", new {Seekercode=item.Seekercode,AppliedJobId=item.AppliedJobId})"></a>
                </p>
                @*@Html.DropDownList("url", new SelectList(new[]{ new SelectListItem { Text = "View Phone Detail", Value = Url.Action("viewphonedetails", "Employer") },
                    new SelectListItem { Text = "Message", Value = Url.Action("Index", "Employer") },
                    new SelectListItem { Text = "Delete Candidate", Value = Url.Action("Deletecandidate", "Employer") },  }, "Value", "Text"), "-- Actions ---", new { @class = "popup" })*@
            </td>



            
        </tr>

    }
</table>


<div id="partialModal" class="modal" tabindex="-1" role="dialog" style="position:center">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" style="color:black; font-size:xx-large">Post Job Details</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
            </div>
            <div class="modal-footer">
                @Html.ActionLink("Close", "Jobapplystud", new { postjobcode = Model.PostJobCode })
                @*<button type="button"><a href="/Employer/Jobapplystud" postjobcode="@Model.PostJobCode">Close</a></button>*@
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/bootstrap.js"></script>

<script type="text/javascript">
    $(function () {
        $(".Details").click(function () {
            var $buttonClicked = $(this);
            var id = $buttonClicked.attr('data-id')
            /* var id = $(this).closest("tr").find("td").eq(0).html();*/
            $.ajax({
                type: "GET",
                url: "/Employer/viewphonedetails",
                data: { AppliedJobId: id },
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                success: function (response) {
                    $("#partialModal").find(".modal-body").html(response);
                    $("#partialModal").modal('show');
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });
        });
    });
</script>



<div id="partialModal" class="modal" tabindex="-1" role="dialog" style="position:center">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" style="color:black; font-size:xx-large">Post Job Details</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
            </div>
            <div class="modal-footer">
                @Html.ActionLink("Close", "Jobapplystud", new { postjobcode = Model.PostJobCode })
                @*<button type="button"><a href="/Employer/Jobapplystud" postjobcode="@Model.PostJobCode">Close</a></button>*@
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/bootstrap.js"></script>

<script type="text/javascript">
    $(function () {
        $(".Deletecandidate").click(function () {
            var $buttonClicked = $(this);
            var id = $buttonClicked.attr('data-id')
            /* var id = $(this).closest("tr").find("td").eq(0).html();*/
            $.ajax({
                type: "GET",
                url: "/Employer/Deletecandidate",
                data: { AppliedJobId: id },
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                success: function (response) {
                    $("#partialModal").find(".modal-body").html(response);
                    $("#partialModal").modal('show');
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });
        });
    });
</script>


@*<script src="~/Scripts/bootstrap.js"></script>
        <script src="~/Scripts/bootstrap.min.js"></script>

    <script type="text/javascript">
        //var TeamDetailPostBackURL = '/Admin/Details';
        $(function () {
            $(".popup").click(function () {
                var $buttonClicked = $(this);
                var url = $buttonClicked.val();
                //  var AppliedJobId = $("#appliedjob").val();
                //var AppliedJobId = $($this).val();
                //var AppliedJobId = ("#mahesh").attr('data-id')

                var parent = $buttonClicked.parent().parent();
                var AppliedJobId = parent.find(".mahesh").attr('data-id');
                var seekercode = parent.find(".seekercode").attr('data-id');
                var postjobcode = parent.find(".pjccode").attr('data-id');
                var options = { "backdrop": "static", keyboard: true };
                if (url == "/Employer/Deletecandidate") {
                    var checkstr = confirm('are you sure you want to delete this?');
                    if (checkstr == true) {
                        var url = $buttonClicked.val();
                        $buttonClicked.parent().parent().remove();
                    } else {
                        url = "";
                    }
                }
                $.ajax({
                    type: "GET",
                    url: url,
                    data: { AppliedJobId: AppliedJobId, seekercode: seekercode },
                    contentType: "application/json; charset=utf-8",
                    dataType: "html",
                    success: function (data) {
                        //$('#myModalContent').html(data);
                        //$('#myModal').modal(options);
                        //$('#myModal').find(".modal-body").html(data);
                        //$('#myModal').modal('show');
                        $(data).modal('show');
                        $.get("/Employer/Jobapplystud", { AppliedJobId: AppliedJobId, postjobcode: postjcode }, function (data) {
                            parent.html(data);
                        });
                    },
                    failure: function (data) {
                        alert("data.dataText");
                    },
                    error: function (data) {
                        alert("data.dataText");
                    }
                });
            });
            //$(".btn").click(function () {
            //    $('#myModal').modal('hide');
            //});


        });</script>*@
<script src="~/Scripts/jquery-3.4.1.js"></script>
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script>
    $(document).ready(function () {
        $(document).tooltip({
            track: true
        });
    });
</script>
